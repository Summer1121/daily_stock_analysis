# 功能规格: 控制台

## ADDED Requirements

### Requirement: CON-1 - 统一控制台界面

系统 MUST 提供一个统一的、基于 Web 的控制台界面，作为所有监控和管理功能的入口。

#### Scenario: 访问控制台
- **Given** 系统正在运行
- **When** 用户访问系统的根 URL
- **Then** 系统应展示控制台的主页面

### Requirement: CON-2 - 实时新闻

控制台 MUST 包含一个实时新闻模块，展示最新的财经新闻。

#### Scenario: 查看新闻
- **Given** 用户位于控制台的新闻模块
- **When** 有新的财经新闻
- **Then** 新闻模块应自动（或手动刷新后）展示最新的新闻条目

### Requirement: CON-3 - 走势分析记录

控制台 MUST 提供一个界面，用于查看历史的走势分析记录。

#### Scenario: 查看历史分析
- **Given** 用户位于控制台的分析记录模块
- **When** 用户选择一个历史日期
- **Then** 系统应展示该日期的走势分析结果

### Requirement: CON-4 - 系统配置

控制台 MUST 允许用户查看和修改系统的核心配置。

#### Scenario: 修改信息渠道配置
- **Given** 用户位于控制台的配置模块
- **When** 用户修改了数据源或新闻源的 API Key
- **And** 点击“保存”
- **Then** 系统的相应配置应被更新

#### Scenario: 修改推送配置
- **Given** 用户位于控制台的配置模块
- **When** 用户修改了企业微信或飞书的 Webhook 地址
- **And** 点击“保存”
- **Then** 系统的通知服务应使用新的地址进行推送

### Requirement: CON-5 - 交易看板

控制台 MUST 提供一个交易看板，用于展示当前的交易状态。

#### Scenario: 查看持仓
- **Given** 用户位于控制台的交易看板模块
- **When** 系统有持仓
- **Then** 看板应展示所有持仓股票的列表，包括成本价、现价、盈亏等信息

#### Scenario: 查看整体盈利
- **Given** 用户位于控制台的交易看板模块
- **When** 用户查看汇总信息
- **Then** 看板应展示今日盈亏、总盈亏等汇总数据

### Requirement: CON-6 - 策略管理

控制台 MUST 允许用户管理交易策略。

#### Scenario: 启用或禁用策略
- **Given** 用户位于控制台的策略管理模块
- **When** 用户切换一个策略旁边的开关
- **Then** 该策略的激活状态应被改变（启用/禁用）

#### Scenario: 切换策略
- **Given** 用户位于控制台的策略管理模块
- **When** 用户从策略列表中选择一个新的策略作为主策略
- **Then** 交易引擎应开始使用新的策略进行决策

### Requirement: CON-7 - 手动交易

控制台 MUST 提供手动下单的功能。

#### Scenario: 手动买入
- **Given** 用户位于控制台的手动交易模块
- **When** 用户输入股票代码、买入价格和数量
- **And** 点击“买入”按钮
- **Then** 系统应向券商接口发送一个买入订单

### Requirement: CON-8 - 策略回测

控制台 MUST 提供策略回测的功能。

#### Scenario: 执行策略回测
- **Given** 用户位于控制台的回测模块
- **When** 用户选择一个交易策略
- **And** 指定了回测的时间区间
- **And** 点击“开始回测”按钮
- **Then** 系统应在该时间区间内加载所需数据，并使用所选策略自动执行模拟交易
- **And** 最终展示回测结果，包括总收益率、夏普比率等关键指标，并存储回测记录。